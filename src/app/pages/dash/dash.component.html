<div class="no-data-grid" *ngIf="isLoading" [@fade]>
  <mat-spinner
    mode="indeterminate"
    [diameter]="80"
    strokeWidth="2"
  ></mat-spinner>
</div>
<div class="the-wrapper">
  <mat-card
    class="no-privileges mat-elevation-z4"
    *ngIf="!render && errorMessage && !isLoading"
    [@entering]="errorMessage"
  >
    <h2>{{ errorMessage }}</h2>
  </mat-card>
  <div>
    <h1 [@entering]>
      <span>Proveedor:</span
      ><span [@child]="proveedor !== undefined">{{
        proveedor[0]?.DESCRIPCION || 'Proveedor no encontrado.'
      }}</span>
    </h1>
  </div>

  <mat-card class="mat-elevation-z4 first">
    <!-- Filtro -->
    <form [formGroup]="formGroup">
      <mat-form-field>
        <input
          matInput
          [matDatepicker]="dp1"
          placeholder="Fecha Inicial"
          formControlName="fechaInicioControl"
          readonly
        />
        <mat-datepicker-toggle matSuffix [for]="dp1"></mat-datepicker-toggle>
        <mat-datepicker touchUi #dp1></mat-datepicker>
      </mat-form-field>
      <mat-form-field>
        <input
          matInput
          [matDatepicker]="dp2"
          placeholder="Fecha Final"
          formControlName="fechaFinControl"
          readonly
        />
        <mat-datepicker-toggle matSuffix [for]="dp2"></mat-datepicker-toggle>
        <mat-datepicker touchUi #dp2></mat-datepicker>
      </mat-form-field>
      <button
        mat-raised-button
        color="primary"
        [disabled]="formGroup.invalid"
        (click)="consultar()"
      >
        <mat-icon>search</mat-icon>
        Consultar
      </button>
    </form>
    <!-- Fin Filtro -->
  </mat-card>
  <mat-card class="mat-elevation-z4" *ngIf="render">
    <!-- Accordion -->
    <mat-accordion class="example-headers-align">
      <mat-expansion-panel [expanded]="step === 0" hideToggle disabled>
        <mat-expansion-panel-header class="accordion-panel-header">
          <mat-panel-title>
            Transportadoras
          </mat-panel-title>
          <mat-panel-description>
            <mat-icon>local_shipping</mat-icon>
          </mat-panel-description>
        </mat-expansion-panel-header>
        <div class="card-wrapper">
          <app-graphic
            *ngFor="let transportadora of lstTransportadoras"
            [transportadora]="transportadora"
          ></app-graphic>
        </div>
      </mat-expansion-panel>

      <mat-expansion-panel [expanded]="step === 1" hideToggle disabled>
        <mat-expansion-panel-header class="accordion-panel-header">
          <mat-panel-title>
            Detalle Transportadora
          </mat-panel-title>
          <mat-panel-description>
            <mat-icon>list</mat-icon>
          </mat-panel-description>
        </mat-expansion-panel-header>

        <mat-form-field>
          <input matInput placeholder="Country" />
        </mat-form-field>
      </mat-expansion-panel>

      <mat-expansion-panel [expanded]="step === 2" hideToggle disabled>
        <mat-expansion-panel-header class="accordion-panel-header">
          <mat-panel-title>
            Datos TIP
          </mat-panel-title>
          <mat-panel-description>
            <mat-icon>view_quilt</mat-icon>
          </mat-panel-description>
        </mat-expansion-panel-header>

        <mat-form-field>
          <input
            matInput
            placeholder="Date"
            [matDatepicker]="picker"
            (focus)="picker.open()"
            readonly
          />
        </mat-form-field>
        <mat-datepicker #picker></mat-datepicker>

        <mat-action-row>
          <button mat-button color="warn" (click)="prevStep()">Previous</button>
          <button mat-button color="primary" (click)="nextStep()">End</button>
        </mat-action-row>
      </mat-expansion-panel>
    </mat-accordion>
    <!-- Fin Accordion -->
  </mat-card>
</div>
